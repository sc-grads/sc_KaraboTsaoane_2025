name: SQL Deployment with Manual Approval
'on':
  push:
    branches:
      - main
    paths:
      - DatabaseAdministration/SQLStatements/create_db2.sql
  workflow_dispatch: null
jobs:
  development:
    name: Deploy to Development (Local)
    uses: ./.github/workflows/sql-deployment-template.yml
    with:
      environment_name: development
      sql_server: '${{ secrets.SQL_SERVER }}'
      sql_user: '${{ secrets.SQL_USER }}'
      sql_password: '${{ secrets.SQL_PASSWORD }}'
      script_path: DatabaseAdministration/SQLStatements/create_db2.sql
  production:
    name: Deploy to Production (requires approval)
    needs: development
    uses: ./.github/workflows/sql-deployment-template.yml
    with:
      environment_name: production
      sql_server: '${{ secrets.PROD_SQL_SERVER }}'
      sql_user: '${{ secrets.PROD_SQL_USER }}'
      sql_password: '${{ secrets.PROD_SQL_PASS }}'
      script_path: DatabaseAdministration/SQLStatements/create_db2.sql
    environment:
      name: production
      url: 'https://your-production-server-url'
